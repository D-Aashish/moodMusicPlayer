{% extends "layout.html" %}

{% block title %} Songs for your mood {% endblock %}

{% block content %}
<h2>Songs for your mood</h2>

{% if musicInfo %}
    {% for song in musicInfo %}
        <div class="card my-3">
          <div class="card-body">
            <p class="card-text">Artist: {{ song.name }}</p>
            <img src="{{ song.image }}" alt="image not found" style="max-width: 150px;">

            {% if song.tracks %}
              {% for track in song.tracks %}
              <p class="card-text">Album: {{ track.name }}</p>
              <h5 class="card-title">{{ track.name }}</h5>
              {% comment %} <img src="{{ track.image }}" alt="image not found" style="max-width: 150px;"> {% endcomment %}
                <img src="{{ track.album_image }}" alt="image not found" style="max-width: 150px;">

                {% if track.audio %}
                  <audio controls>
                    <source src="{{ track.audio }}" type="audio/mpeg">
                    Your browser does not support the audio tag.
                  </audio>
                {% else %}
                  <p>No preview available.</p>
                {% endif %}
              {% empty %}
                <p>No tracks available for this song.</p>
              {% endfor %}
            {% else %}
              <p>No tracks available for this artist.</p>
            {% endif %}
          </div>
        </div>
    {% empty %}
        <p>No songs found for this mood.</p>
    {% endfor %}
{% else %}
    <p>No mood selected yet.</p>
{% endif %}

{% endblock %}
