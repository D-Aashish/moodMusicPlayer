{% extends "base.html" %}

{% block title %} Songs for your mood {% endblock %}

{% block content %}

{% if musicInfo %}
    {% for track in musicInfo %}
            <div class="track-card" style="border:1px solid #ccc; padding:10px; margin-bottom:10px;">
                <img src="{{ track.album_image }}" alt="{{ track.name }}" width="150">
                <h3>{{ track.name }}</h3>
                <p>Artist: {{ track.artist_name }}</p>
                <p>Album: {{ track.album_name }}</p>
                <p>Released: {{ track.releasedate }}</p>
                <p>Duration: {{ track.duration|divisibleby:60 }}:{% widthratio track.duration 60 60 %} min</p>
                <audio controls>
                    <source src="{{ track.audio }}" type="audio/mpeg">
                    Your browser does not support the audio element.
                </audio>s -->
                <p>
                    <a href="{{ track.prourl }}" target="_blank">License Info</a> |
                    <a href="{{ track.audiodownload }}" target="_blank">Download</a> |
                    <a href="{{ track.shareurl }}" target="_blank">Share</a>
                </p>
                {% if track.musicinfo.tags.genres %}
                    <p>Genres: {{ track.musicinfo.tags.genres|join:", " }}</p>
                {% endif %}
                {% if track.musicinfo.tags.vartags %}
                    <p>Vartags: {{ track.musicinfo.tags.vartags|join:", " }}</p>
                {% endif %}
            </div>
        {% endfor %}

{% else %}
    <p>No mood selected yet.</p>
{% endif %}

{% endblock %}

<script>
    function playMusic(songs) {
  if (!songs.length) {
    alert("No songs found");
    return;
  }

  const audio = document.getElementById("audioPlayer");
  audio.src = songs[0].audio;
  audio.play();
}

</script>