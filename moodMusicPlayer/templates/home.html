{% load static %}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="stylesheet" href="{%static 'home.css' %}">
</head>
{% block content %}    
  <div class="dashboard-container">
    <div class="sidebar" id="sidebarToggle">
         <div class="sidebar-home">
            <nav class="sidebar-menu">
                <div class="navButton" onclick="hideSidebar()">
                    <div class="btn1"></div>
                    <div class="btn2"></div>
                    <div class="btn3"></div>
                </div>
                <a href="#" class="menu-item"> 
                    <i class="fa-solid fa-house" style="color: #000000;"></i>
                    Home</a>
                <a href="#" class="menu-item">
                    <i class="fa-regular fa-object-group" style="color: #000000;"></i>
                    Browse</a>
                    <a href="#" class="menu-item">
                        <i class="fa-regular fa-images"></i>
                    Album</a>
                <a href="#" class="menu-item">
                    <i class="fa-regular fa-user" style="color: #121212;"></i>
                    Artists</a>
            </nav>
        </div>

        <div class="sidebar-my-music">
            <h3 class="sidebar-section-title">My Music</h3>
            <nav class="sidebar-menu">
            <a href="#" class="menu-item">Songs</a>
            <a href="#" class="menu-item">Albums</a>
            <a href="#" class="menu-item">Artists</a>
            </nav>
        </div>

        <div class="sidebar-playlists">
            <h3 class="sidebar-section-title">Playlists</h3>
            <nav class="sidebar-menu playlists-list">
            <a href="#" class="menu-item">Playlist 1</a>
            <a href="#" class="menu-item">Playlist 2</a>
            <a href="#" class="menu-item">Playlist 3</a>
            </nav>
        </div>
    </div>

    <div class="main">
        <div class="topbar">
            <div class="topbar-left">
                <div class="menu-icon">‚ãÆ‚ãÆ</div>
                <input type="text" placeholder="Search" class="search-input" id="searchInput" />
            </div>
            <div class="divider"></div>
            <div class="topbar-right">
                <button class="notification-btn">üîî</button>
                <button class="settings-btn">‚öôÔ∏è</button>
        </div>
        </div>
        <div class="artists">
            <div class="artist-card">
                {% comment %} <img src="artist1" alt="Stoney" /> {% endcomment %}
                <h4>Stoney</h4>
                <p>Post Malone</p>
            </div>
             <div class="artist-card">
                {% comment %} <img src="artist2.jpg" alt="Blue Neighbour" /> {% endcomment %}
                <h4>Blue Neighbour</h4>
                <p>Troye Sivan</p>
            </div>
        </div>
        <div class="musciPlayed">
           <div class="music-section">
            <section class="now-playing">
                <h3>Now Playing</h3>
                <!-- Now playing content here -->
            </section>

            <section class="mostly-played">
                <h3>Mostly Played ‚ù§Ô∏è</h3>
                <div class="song-row">
                    <span class="track-num">01</span>
                    {% comment %} <img src="rockstar.jpg" alt="Rockstar" class="song-thumb" /> {% endcomment %}
                    <div class="song-info">
                        <h4>Rockstar</h4>
                        <p>Post Malone</p>
                    </div>
                    <span class="duration">4:31</span>
                    <span class="track-num">01</span>
                    {% comment %} <img src="rockstar.jpg" alt="Rockstar" class="song-thumb" /> {% endcomment %}
                    <div class="song-info">
                        <h4>Rockstar</h4>
                        <p>Post Malone</p>
                    </div>
                    <span class="duration">4:31</span>
                    <span class="track-num">01</span>
                    {% comment %} <img src="rockstar.jpg" alt="Rockstar" class="song-thumb" /> {% endcomment %}
                    <div class="song-info">
                        <h4>Rockstar</h4>
                        <p>Post Malone</p>
                    </div>
                    <span class="duration">4:31</span>
                    <span class="track-num">01</span>
                    {% comment %} <img src="rockstar.jpg" alt="Rockstar" class="song-thumb" /> {% endcomment %}
                    <div class="song-info">
                        <h4>Rockstar</h4>
                        <p>Post Malone</p>
                    </div>
                    <span class="duration">4:31</span>
                    <span class="track-num">01</span>
                    {% comment %} <img src="rockstar.jpg" alt="Rockstar" class="song-thumb" /> {% endcomment %}
                    <div class="song-info">
                        <h4>Rockstar</h4>
                        <p>Post Malone</p>
                    </div>
                    <span class="duration">4:31</span>
                    <span class="track-num">01</span>
                    {% comment %} <img src="rockstar.jpg" alt="Rockstar" class="song-thumb" /> {% endcomment %}
                    <div class="song-info">
                        <h4>Rockstar</h4>
                        <p>Post Malone</p>
                    </div>
                    <span class="duration">4:31</span>
                </div>
            </section>

        </div>
    </div>
  </div>
{% endblock %}


<script>
     function fetchMusicByMood(mood) {
     fetch(`/api/?mood=${encodeURIComponent(mood)}`)
            .then(response => {
                if (!response.ok) throw new Error("Mood not found or API error");
          return response.json();
        })
        .then(data => {
            console.log("Fetched songs:", data.songs);
            // Call your function to play songs here, e.g. playMusic(data.songs)
        })
        .catch(error => {
            console.error("Error fetching songs:", error);
            alert(error.message);
        });
          }

        function playMusic(songsData){

        }

   document.getElementById("searchInput").addEventListener("keydown", function(event) {
        if (event.key === "Enter") {event.preventDefault();
            const mood = this.value.trim();
            if (!mood) {
        alert("Please enter a mood to search");
        return;
      }
            if (mood !== "") 
            {
                //fetchMusicByMood(mood);
            window.location.href = `/search/?mood=${encodeURIComponent(mood)}`;}}
    });

    const hideSidebar = ()=>{
        const sidebar = document.getElementById("sidebarToggle");
        sidebar.classList.toggle("hidden");
    }

    document.addEventListener("DOMContentLoaded", () => {
        document.querySelector(".navButton").addEventListener("click", function() {
        console.log("navButton (toggle sidebar) clicked");
        document.querySelector(".dashboard-container"``).style.gridTemplateColumns = "1fr";
    });
});

</script>